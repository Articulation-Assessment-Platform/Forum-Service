ÿ+
^C:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
	AddScoped 
< 
IPostService '
,' (
PostService) 4
>4 5
(5 6
)6 7
;7 8
builder 
. 
Services 
. 
	AddScoped 
< 
IforumService (
,( )
ForumService* 6
>6 7
(7 8
)8 9
;9 :
builder 
. 
Services 
. 
	AddScoped 
< 
ILikeService '
,' (
LikeService) 4
>4 5
(5 6
)6 7
;7 8
builder 
. 
Services 
. 
	AddScoped 
< 
IResponseService +
,+ ,
ResponseService- <
>< =
(= >
)> ?
;? @
builder 
. 
Services 
. 
	AddScoped 
< 
IPostRepository *
,* +
PostRepository, :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IForumRepository +
,+ ,
ForumRepository- <
>< =
(= >
)> ?
;? @
builder 
. 
Services 
. 
	AddScoped 
< 
ILikeRepository *
,* +
LikeRepository, :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IResponseRepository .
,. /
ResponseRepository0 B
>B C
(C D
)D E
;E F
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
c  
=>! #
{ 
c 
. 

SwaggerDoc 
( 
$str 
, 
new 
( 
) 
{ 
Title $
=% &
$str' 9
,9 :
Version; B
=C D
$strE I
}J K
)K L
;L M
c 
. !
AddSecurityDefinition 
( 
$str $
,$ %
new& )!
OpenApiSecurityScheme* ?
{   
Description!! 
=!! 
$str!! t
,!!t u
Name"" 
="" 
$str"" 
,"" 
In## 

=## 
ParameterLocation## 
.## 
Header## %
,##% &
Type$$ 
=$$ 
SecuritySchemeType$$ !
.$$! "
ApiKey$$" (
,$$( )
Scheme%% 
=%% 
$str%% 
}&& 
)&& 
;&& 
c(( 
.(( "
AddSecurityRequirement(( 
((( 
new((  &
OpenApiSecurityRequirement((! ;
(((; <
)((< =
{)) 
{** 	
new++ !
OpenApiSecurityScheme++ %
{,, 
	Reference-- 
=-- 
new-- 
OpenApiReference--  0
{.. 
Type// 
=// 
ReferenceType// (
.//( )
SecurityScheme//) 7
,//7 8
Id00 
=00 
$str00 !
}11 
,11 
Scheme22 
=22 
$str22 !
,22! "
Name33 
=33 
$str33 
,33  
In44 
=44 
ParameterLocation44 &
.44& '
Header44' -
}55 
,55 
new66 
List66 
<66 
string66 
>66 
(66 
)66 
}77 	
}88 
)88 
;88 
}99 
)99 
;99 
var;; 
app;; 
=;; 	
builder;;
 
.;; 
Build;; 
(;; 
);; 
;;; 
if>> 
(>> 
app>> 
.>> 
Environment>> 
.>> 
IsDevelopment>> !
(>>! "
)>>" #
)>># $
{?? 
app@@ 
.@@ 

UseSwagger@@ 
(@@ 
)@@ 
;@@ 
appAA 
.AA 
UseSwaggerUIAA 
(AA 
)AA 
;AA 
}BB 
appDD 
.DD 
UseHttpsRedirectionDD 
(DD 
)DD 
;DD 
appFF 
.FF 
UseAuthorizationFF 
(FF 
)FF 
;FF 
appHH 
.HH 
MapControllersHH 
(HH 
)HH 
;HH 
appJJ 
.JJ 
RunJJ 
(JJ 
)JJ 	
;JJ	 
ó
gC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\DTOs\ResponseDTO.cs
	namespace 	
ForumAPI
 
. 
DTOs 
{ 
public 

class 
ResponseDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
int		 
AuthorId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
string

 
Content

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
=

, -
string

. 4
.

4 5
Empty

5 :
;

: ;
public 
int 
PostId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

ResponseId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
DateTime 
DateTime  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Url 
{ 
get 
;  
set! $
;$ %
}& '
=( )
string* 0
.0 1
Empty1 6
;6 7
} 
} ¾
cC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\DTOs\PostDTO.cs
	namespace 	
ForumAPI
 
. 
DTOs 
{ 
public 

class 
PostDTO 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Content 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
string. 4
.4 5
Empty5 :
;: ;
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
DateTime 
DateTime  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Url 
{ 
get 
;  
set! $
;$ %
}& '
=( )
string* 0
.0 1
Empty1 6
;6 7
public 
int 
ForumId 
{ 
get  
;  !
set" %
;% &
}' (
} 
} 
cC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\DTOs\LikeDTO.cs
	namespace 	
ForumAPI
 
. 
DTOs 
{ 
public 

class 
LikeDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
PostId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

ResponseId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
}		 
}

 ‘	
dC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\DTOs\ForumDTO.cs
	namespace 	
ForumAPI
 
. 
DTOs 
{ 
public 

class 
ForumDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
CategoryName		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
=		1 2
string		3 9
.		9 :
Empty		: ?
;		? @
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
=

0 1
string

2 8
.

8 9
Empty

9 >
;

> ?
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
} 
} ¡?
uC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\Controllers\ResponseController.cs
	namespace 	
ForumAPI
 
. 
Controllers 
{		 
[

 
	Authorize

 
]

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
ResponseController #
:$ %

Controller& 0
{ 
private 
readonly 
IResponseService )
_responseService* :
;: ;
public 
ResponseController !
(! "
IResponseService" 2
responseService3 B
)B C
{ 	
_responseService 
= 
responseService .
;. /
} 	
[ 	
HttpGet	 
( 
$str (
)( )
]) *
public 
async 
Task 
< 
IActionResult '
>' (
GetPostResponses) 9
(9 :
int: =

responseId> H
)H I
{ 	
List 
< 
ResponseModel 
> 
	responses  )
=* +
await, 1
_responseService2 B
.B C
GetAllC I
(I J

responseIdJ T
)T U
;U V
if 
( 
	responses 
== 
null !
)! "
{ 
return 

BadRequest !
(! "
$str" D
)D E
;E F
} 
List   
<   
ResponseDTO   
>   
ps    
=  ! "
new  # &
List  ' +
<  + ,
ResponseDTO  , 7
>  7 8
(  8 9
)  9 :
;  : ;
foreach!! 
(!! 
ResponseModel!! "
p!!# $
in!!% '
	responses!!( 1
)!!1 2
{"" 
ps## 
.## 
Add## 
(## 
new## 
ResponseDTO## &
(##& '
)##' (
{$$ 
Id%% 
=%% 
p%% 
.%% 
Id%% 
,%% 
Content&& 
=&& 
p&& 
.&&  
Content&&  '
,&&' (
AuthorId'' 
='' 
p''  
.''  !
AuthorId''! )
,'') *
DateTime(( 
=(( 
p((  
.((  !
DateTime((! )
,(() *
Audience)) 
=)) 
p))  
.))  !
Audience))! )
,))) *
Url** 
=** 
p** 
.** 
Url** 
,**  
PostId++ 
=++ 
p++ 
.++ 
PostId++ %
,++% &

ResponseId,, 
=,,  
p,,! "
.,," #

ResponseId,,# -
}-- 
)-- 
;-- 
}.. 
return11 
Ok11 
(11 
ps11 
)11 
;11 
}22 	
[55 	
HttpPost55	 
(55 
$str55 
)55 
]55 
public66 
IActionResult66 
AddResponse66 (
(66( )
[66) *
FromBody66* 2
]662 3
ResponseDTO664 ?
p66@ A
)66A B
{77 	
ResponseModel88 
response88 "
=88# $
new88% (
ResponseModel88) 6
{99 
Id:: 
=:: 
p:: 
.:: 
Id:: 
,:: 
Content;; 
=;; 
p;; 
.;; 
Content;; #
,;;# $
AuthorId<< 
=<< 
p<< 
.<< 
AuthorId<< %
,<<% &
DateTime== 
=== 
p== 
.== 
DateTime== %
,==% &
Audience>> 
=>> 
p>> 
.>> 
Audience>> %
,>>% &
Url?? 
=?? 
p?? 
.?? 
Url?? 
,?? 
PostId@@ 
=@@ 
p@@ 
.@@ 
PostId@@ !
,@@! "

ResponseIdAA 
=AA 
pAA 
.AA 

ResponseIdAA )
}CC 
;CC 
_responseServiceDD 
.DD 
CreateDD #
(DD# $
responseDD$ ,
)DD, -
;DD- .
returnEE 
OkEE 
(EE 
)EE 
;EE 
}FF 	
[JJ 	

HttpDeleteJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
publicKK 
IActionResultKK 
DeleteResponseKK +
(KK+ ,
[KK, -
FromBodyKK- 5
]KK5 6
ResponseDTOKK7 B
pKKC D
)KKD E
{LL 	
ResponseModelMM 
responseMM "
=MM# $
newMM% (
ResponseModelMM) 6
{NN 
IdOO 
=OO 
pOO 
.OO 
IdOO 
,OO 
ContentPP 
=PP 
pPP 
.PP 
ContentPP #
,PP# $
AuthorIdQQ 
=QQ 
pQQ 
.QQ 
AuthorIdQQ %
,QQ% &
DateTimeRR 
=RR 
pRR 
.RR 
DateTimeRR %
,RR% &
AudienceSS 
=SS 
pSS 
.SS 
AudienceSS %
,SS% &
UrlTT 
=TT 
pTT 
.TT 
UrlTT 
,TT 
PostIdUU 
=UU 
pUU 
.UU 
PostIdUU !
,UU! "

ResponseIdVV 
=VV 
pVV 
.VV 

ResponseIdVV )
}WW 
;WW 
_responseServiceXX 
.XX 
DeleteXX #
(XX# $
responseXX$ ,
)XX, -
;XX- .
returnYY 
OkYY 
(YY 
)YY 
;YY 
}ZZ 	
[]] 	
HttpGet]]	 
(]] 
$str]] 
)]] 
]]] 
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
GetResponse^^) 4
(^^4 5
int^^5 8
id^^9 ;
)^^; <
{__ 	
ResponseModel`` 
p`` 
=`` 
await`` #
_responseService``$ 4
.``4 5
Get``5 8
(``8 9
id``9 ;
)``; <
;``< =
ifbb 
(bb 
pbb 
==bb 
nullbb 
)bb 
{cc 
returndd 

BadRequestdd !
(dd! "
$strdd" C
)ddC D
;ddD E
}ee 
ResponseDTOgg 
responsegg  
=gg! "
newgg# &
ResponseDTOgg' 2
(gg2 3
)gg3 4
{hh 
Idii 
=ii 
pii 
.ii 
Idii 
,ii 
Contentjj 
=jj 
pjj 
.jj 
Contentjj #
,jj# $
AuthorIdkk 
=kk 
pkk 
.kk 
AuthorIdkk %
,kk% &
DateTimell 
=ll 
pll 
.ll 
DateTimell %
,ll% &
Audiencemm 
=mm 
pmm 
.mm 
Audiencemm %
,mm% &
Urlnn 
=nn 
pnn 
.nn 
Urlnn 
,nn 
PostIdoo 
=oo 
poo 
.oo 
PostIdoo !
,oo! "

ResponseIdpp 
=pp 
ppp 
.pp 

ResponseIdpp )
}qq 
;qq 
returnss 
Okss 
(ss 
responsess 
)ss 
;ss  
}tt 	
}vv 
}ww û9
qC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\Controllers\PostController.cs
	namespace 	
ForumAPI
 
. 
Controllers 
{		 
[

 
	Authorize

 
]

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
PostController 
:  !

Controller" ,
{ 
private 
readonly 
IPostService %
_postService& 2
;2 3
public 
PostController 
( 
IPostService *
postService+ 6
)6 7
{ 	
_postService 
= 
postService &
;& '
} 	
[ 	
HttpGet	 
( 
$str &
)& '
]' (
public 
async 
Task 
< 
IActionResult '
>' (
GetForumPosts) 6
(6 7
int7 :
ForumId; B
)B C
{ 	
List 
< 
	PostModel 
> 
posts !
=" #
await$ )
_postService* 6
.6 7
GetAll7 =
(= >
ForumId> E
)E F
;F G
if 
( 
posts 
== 
null 
) 
{ 
return 

BadRequest !
(! "
$str" @
)@ A
;A B
} 
List   
<   
PostDTO   
>   
ps   
=   
new   "
List  # '
<  ' (
PostDTO  ( /
>  / 0
(  0 1
)  1 2
;  2 3
foreach!! 
(!! 
	PostModel!! 
p!! 
in!!  "
posts!!# (
)!!( )
{"" 
ps## 
.## 
Add## 
(## 
new## 
PostDTO## "
(##" #
)### $
{$$ 
Id%% 
=%% 
p%% 
.%% 
Id%% 
,%% 
Title&& 
=&& 
p&& 
.&& 
Title&& #
,&&# $
Content'' 
='' 
p'' 
.''  
Content''  '
,''' (
AuthorId(( 
=(( 
p((  
.((  !
AuthorId((! )
,(() *
DateTime)) 
=)) 
p))  
.))  !
DateTime))! )
,))) *
Audience** 
=** 
p**  
.**  !
Audience**! )
,**) *
Url++ 
=++ 
p++ 
.++ 
Url++ 
,++  
ForumId,, 
=,, 
p,, 
.,,  
ForumId,,  '
}-- 
)-- 
;-- 
}.. 
return11 
Ok11 
(11 
ps11 
)11 
;11 
}22 	
[55 	
HttpPost55	 
(55 
$str55 
)55 
]55 
public66 
IActionResult66 
AddPost66 $
(66$ %
[66% &
FromBody66& .
]66. /
PostDTO660 7
p668 9
)669 :
{77 	
	PostModel88 
post88 
=88 
new88  
	PostModel88! *
{99 
Title:: 
=:: 
p:: 
.:: 
Title:: 
,::  
Content;; 
=;; 
p;; 
.;; 
Content;; #
,;;# $
AuthorId<< 
=<< 
p<< 
.<< 
AuthorId<< %
,<<% &
Audience== 
=== 
p== 
.== 
Audience== %
,==% &
DateTime>> 
=>> 
p>> 
.>> 
DateTime>> %
,>>% &
Url?? 
=?? 
p?? 
.?? 
Url?? 
,?? 
ForumId@@ 
=@@ 
p@@ 
.@@ 
ForumId@@ #
}BB 
;BB 
_postServiceCC 
.CC 
CreateCC 
(CC  
postCC  $
)CC$ %
;CC% &
returnDD 
OkDD 
(DD 
)DD 
;DD 
}EE 	
[II 	

HttpDeleteII	 
(II 
$strII 
)II 
]II 
publicJJ 
IActionResultJJ 

DeletePostJJ '
(JJ' (
[JJ( )
FromBodyJJ) 1
]JJ1 2
PostDTOJJ3 :
pJJ; <
)JJ< =
{KK 	
	PostModelLL 
postLL 
=LL 
newLL  
	PostModelLL! *
{MM 
IdNN 
=NN 
pNN 
.NN 
IdNN 
,NN 
TitleOO 
=OO 
pOO 
.OO 
TitleOO 
,OO  
ContentPP 
=PP 
pPP 
.PP 
ContentPP #
,PP# $
AuthorIdQQ 
=QQ 
pQQ 
.QQ 
AuthorIdQQ %
,QQ% &
}SS 
;SS 
_postServiceTT 
.TT 
DeleteTT 
(TT  
postTT  $
)TT$ %
;TT% &
returnUU 
OkUU 
(UU 
)UU 
;UU 
}VV 	
[YY 	
HttpGetYY	 
(YY 
$strYY 
)YY 
]YY 
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
GetPostZZ) 0
(ZZ0 1
intZZ1 4
idZZ5 7
)ZZ7 8
{[[ 	
	PostModel\\ 
p\\ 
=\\ 
await\\ 
_postService\\  ,
.\\, -
Get\\- 0
(\\0 1
id\\1 3
)\\3 4
;\\4 5
if^^ 
(^^ 
p^^ 
==^^ 
null^^ 
)^^ 
{__ 
return`` 

BadRequest`` !
(``! "
$str``" ?
)``? @
;``@ A
}aa 
PostDTOcc 
postcc 
=cc 
newcc 
PostDTOcc &
(cc& '
)cc' (
{dd 
Idee 
=ee 
pee 
.ee 
Idee 
,ee 
Titleff 
=ff 
pff 
.ff 
Titleff 
,ff  
Contentgg 
=gg 
pgg 
.gg 
Contentgg #
,gg# $
AuthorIdhh 
=hh 
phh 
.hh 
AuthorIdhh %
,hh% &
DateTimeii 
=ii 
pii 
.ii 
DateTimeii %
,ii% &
Audiencejj 
=jj 
pjj 
.jj 
Audiencejj %
,jj% &
Urlkk 
=kk 
pkk 
.kk 
Urlkk 
,kk 
ForumIdll 
=ll 
pll 
.ll 
ForumIdll "
}mm 
;mm 
returnoo 
Okoo 
(oo 
postoo 
)oo 
;oo 
}pp 	
}ss 
}tt ´B
qC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\Controllers\LikeController.cs
	namespace		 	
ForumAPI		
 
.		 
Controllers		 
{

 
[ 
	Authorize 
] 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
LikeController 
:  !

Controller" ,
{ 
private 
readonly 
ILikeService %
_likeService& 2
;2 3
public 
LikeController 
( 
ILikeService *
likeService+ 6
)6 7
{ 	
_likeService 
= 
likeService &
;& '
} 	
[ 	
HttpGet	 
( 
$str (
)( )
]) *
public 
async 
Task 
< 
IActionResult '
>' (
GetPostLikes) 5
(5 6
int6 9
postId: @
)@ A
{ 	
List 
< 
	LikeModel 
> 

likesModel &
=' (
await) .
_likeService/ ;
.; <

GetAllPost< F
(F G
postIdG M
)M N
;N O
List 
< 
LikeDTO 
> 
ls 
= 
new "
List# '
<' (
LikeDTO( /
>/ 0
(0 1
)1 2
;2 3
if 
( 

likesModel 
. 
Count 
==  "
$num# $
)$ %
{& '
return( .
Ok/ 1
(1 2
$str2 O
)O P
;P Q
}R S
foreach 
( 
	LikeModel 
l  
in! #

likesModel$ .
). /
{ 
ls 
. 
Add 
( 
new 
LikeDTO "
(" #
)# $
{   
Id!! 
=!! 
l!! 
.!! 
Id!! 
,!! 
UserId"" 
="" 
l"" 
."" 
UserId"" %
,""% &
PostId## 
=## 
l## 
.## 
PostId## %
}%% 
)%% 
;%% 
}&& 
return'' 
Ok'' 
('' 
ls'' 
)'' 
;'' 
}(( 	
[)) 	
HttpGet))	 
()) 
$str)) 0
)))0 1
]))1 2
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (
GetResponseLikes**) 9
(**9 :
int**: =

responseId**> H
)**H I
{++ 	
List,, 
<,, 
	LikeModel,, 
>,, 

likesModel,, &
=,,' (
await,,) .
_likeService,,/ ;
.,,; <
GetAllResponse,,< J
(,,J K

responseId,,K U
),,U V
;,,V W
List-- 
<-- 
LikeDTO-- 
>-- 
ls-- 
=-- 
new-- "
List--# '
<--' (
LikeDTO--( /
>--/ 0
(--0 1
)--1 2
;--2 3
if.. 
(.. 

likesModel.. 
... 
Count..  
==..! #
$num..$ %
)..% &
{..' (
return..) /
Ok..0 2
(..2 3
$str..3 T
)..T U
;..U V
}..W X
foreach// 
(// 
	LikeModel// 
l//  
in//! #

likesModel//$ .
)//. /
{00 
ls11 
.11 
Add11 
(11 
new11 
LikeDTO11 "
(11" #
)11# $
{22 
Id33 
=33 
l33 
.33 
Id33 
,33 
UserId44 
=44 
l44 
.44 
UserId44 %
,44% &

ResponseId55 
=55  
l55! "
.55" #

ResponseId55# -
}77 
)77 
;77 
}88 
return99 
Ok99 
(99 
ls99 
)99 
;99 
}:: 	
[;; 	
HttpGet;;	 
(;; 
$str;; (
);;( )
];;) *
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
GetUserLikes<<) 5
(<<5 6
int<<6 9
userId<<: @
)<<@ A
{== 	
List>> 
<>> 
	LikeModel>> 
>>> 

likesModel>> &
=>>' (
await>>) .
_likeService>>/ ;
.>>; <

GetAllUser>>< F
(>>F G
userId>>G M
)>>M N
;>>N O
List?? 
<?? 
LikeDTO?? 
>?? 
ls?? 
=?? 
new?? "
List??# '
<??' (
LikeDTO??( /
>??/ 0
(??0 1
)??1 2
;??2 3
if@@ 
(@@ 

likesModel@@ 
.@@ 
Count@@  
==@@! #
$num@@$ %
)@@% &
{@@' (
return@@) /
Ok@@0 2
(@@2 3
$str@@3 Z
)@@Z [
;@@[ \
}@@] ^
foreachAA 
(AA 
	LikeModelAA 
lAA  
inAA! #

likesModelAA$ .
)AA. /
{BB 
lsCC 
.CC 
AddCC 
(CC 
newCC 
LikeDTOCC "
(CC" #
)CC# $
{DD 
IdEE 
=EE 
lEE 
.EE 
IdEE 
,EE 
UserIdFF 
=FF 
lFF 
.FF 
UserIdFF %
,FF% &
PostIdGG 
=GG 
lGG 
.GG 
PostIdGG %
,GG% &

ResponseIdHH 
=HH  
lHH! "
.HH" #

ResponseIdHH# -
}II 
)II 
;II 
}JJ 
returnKK 
OkKK 
(KK 
lsKK 
)KK 
;KK 
}LL 	
[OO 	
HttpPostOO	 
(OO 
$strOO 
)OO 
]OO 
publicPP 
IActionResultPP 
LikePP !
(PP! "
[PP" #
FromBodyPP# +
]PP+ ,
LikeDTOPP- 4
lPP5 6
)PP6 7
{QQ 	
	LikeModelRR 
likeRR 
=RR 
newRR  
	LikeModelRR! *
{SS 
PostIdTT 
=TT 
lTT 
.TT 
PostIdTT !
,TT! "
UserIdUU 
=UU 
lUU 
.UU 
UserIdUU !
,UU! "

ResponseIdVV 
=VV 
lVV 
.VV 

ResponseIdVV )
}WW 
;WW 
_likeServiceXX 
.XX 
CreateXX 
(XX  
likeXX  $
)XX$ %
;XX% &
returnYY 
OkYY 
(YY 
)YY 
;YY 
}ZZ 	
[^^ 	

HttpDelete^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 
IActionResult__ 
UnLike__ #
(__# $
[__$ %
FromBody__% -
]__- .
LikeDTO__/ 6
l__7 8
)__8 9
{`` 	
	LikeModelaa 
likeaa 
=aa 
newaa  
	LikeModelaa! *
{bb 
Idcc 
=cc 
lcc 
.cc 
Idcc 
,cc 
PostIddd 
=dd 
ldd 
.dd 
PostIddd !
,dd! "
UserIdee 
=ee 
lee 
.ee 
UserIdee !
,ee! "

ResponseIdff 
=ff 
lff 
.ff 

ResponseIdff )
}gg 
;gg 
_likeServicehh 
.hh 
Deletehh 
(hh  
likehh  $
)hh$ %
;hh% &
returnii 
Okii 
(ii 
)ii 
;ii 
}jj 	
}kk 
}ll ê-
rC:\Users\maike\Articulation-Assessment-Platform\Forum-Service\ForumService\ForumAPI\Controllers\ForumController.cs
	namespace

 	
ForumAPI


 
.

 
Controllers

 
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
ForumController  
:! "

Controller# -
{ 
private 
readonly 
IforumService &
_forumService' 4
;4 5
public 
ForumController 
( 
IforumService ,
forumService- 9
)9 :
{ 	
_forumService 
= 
forumService (
;( )
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
GetAllPublicForums) ;
(; <
)< =
{ 	
var 
identity 
= 
HttpContext &
.& '
User' +
.+ ,
Identity, 4
as5 7
ClaimsIdentity8 F
;F G
var 
	roleClaim 
= 
identity $
.$ %
	FindFirst% .
(. /

ClaimTypes/ 9
.9 :
Role: >
)> ?
;? @
List 
< 

ForumModel 
> 
forums #
=$ %
await& +
_forumService, 9
.9 :
	GetForums: C
(C D
	roleClaimD M
.M N
ValueN S
)S T
;T U
if 
( 
forums 
== 
null 
) 
return  &

BadRequest' 1
(1 2
$str2 D
)D E
;E F
List   
<   
ForumDTO   
>   
frms   
=    !
new  " %
List  & *
<  * +
ForumDTO  + 3
>  3 4
(  4 5
)  5 6
;  6 7
foreach"" 
("" 

ForumModel"" 
forum""  %
in""& (
forums"") /
)""/ 0
{## 
frms%% 
.%% 
Add%% 
(%% 
new%% 
ForumDTO%% %
{&& 
Id'' 
='' 
forum'' 
.'' 
Id'' !
,''! "
Audience(( 
=(( 
forum(( $
.(($ %
Audience((% -
,((- .
CategoryName))  
=))! "
forum))# (
.))( )
CategoryName))) 5
,))5 6
Description** 
=**  !
forum**" '
.**' (
Description**( 3
}++ 
)++ 
;++ 
},, 
return-- 
Ok-- 
(-- 
frms-- 
)-- 
;-- 
}.. 	
[// 	
	Authorize//	 
]// 
[00 	
HttpGet00	 
(00 
$str00 $
)00$ %
]00% &
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' ("
GetAllAuthorisedForums11) ?
(11? @
string11@ F
audience11G O
)11O P
{22 	
var33 
identity33 
=33 
HttpContext33 &
.33& '
User33' +
.33+ ,
Identity33, 4
as335 7
ClaimsIdentity338 F
;33F G
var44 
	roleClaim44 
=44 
identity44 $
.44$ %
	FindFirst44% .
(44. /

ClaimTypes44/ 9
.449 :
Role44: >
)44> ?
;44? @
if66 
(66 
	roleClaim66 
.66 
Value66 
!=66  "
audience66# +
)66+ ,
{77 
return88 
Unauthorized88 #
(88# $
$str88$ K
)88K L
;88L M
}99 
List;; 
<;; 

ForumModel;; 
>;; 
forums;; #
=;;$ %
await;;& +
_forumService;;, 9
.;;9 :
	GetForums;;: C
(;;C D
	roleClaim;;D M
.;;M N
Value;;N S
);;S T
;;;T U
if== 
(== 
forums== 
==== 
null== 
)== 
return==  &

BadRequest==' 1
(==1 2
$str==2 D
)==D E
;==E F
List?? 
<?? 
ForumDTO?? 
>?? 
frms?? 
=??  !
new??" %
List??& *
<??* +
ForumDTO??+ 3
>??3 4
(??4 5
)??5 6
;??6 7
foreachAA 
(AA 

ForumModelAA 
forumAA  %
inAA& (
forumsAA) /
)AA/ 0
{BB 
frmsCC 
.CC 
AddCC 
(CC 
newCC 
ForumDTOCC %
{DD 
IdEE 
=EE 
forumEE 
.EE 
IdEE !
,EE! "
AudienceFF 
=FF 
forumFF $
.FF$ %
AudienceFF% -
,FF- .
CategoryNameGG  
=GG! "
forumGG# (
.GG( )
CategoryNameGG) 5
,GG5 6
DescriptionHH 
=HH  !
forumHH" '
.HH' (
DescriptionHH( 3
}II 
)II 
;II 
}JJ 
returnKK 
OkKK 
(KK 
frmsKK 
)KK 
;KK 
}LL 	
}MM 
}NN 